{% extends "base.html" %}
{% block title %}Dashboard - e-Infosoft{% endblock %}
{% block content %}
<h1> e-Infosoft Business Dashboard</h1>

<p><strong>Total Revenue:</strong> {{ revenue }}</p>
<p><strong>Total Profit:</strong> {{ profit }}</p>
<p><strong>Total Units Sold:</strong> {{ units }}</p>

<h2> Generate Chart</h2>
<form action="/chart" method="post">
    <label>Select Chart Type:</label>
    <select name="chart_type">
        <option value="line">Line Chart</option>
        <option value="bar">Bar Chart</option>
        <option value="pie">Pie Chart</option>
    </select><br><br>

    <label>Select Metric:</label>
    <select name="metric">
        <option value="Revenue">Revenue</option>
        <option value="Profit">Profit</option>
        <option value="Units_Sold">Units Sold</option>
    </select><br><br>

    <label>Select Product:</label>
    <select name="product">
        <option value="All">All Products</option>
        {% for prod in products %}
            <option value="{{ prod }}">{{ prod }}</option>
        {% endfor %}
    </select><br><br>

    <input type="submit" value="Generate Chart" class="button">
</form>

{% if chart_path %}
    <h3>Generated Charts:</h3>
    {% for chart in chart_path %}
        <img src="/static/{{ chart }}" width="600"><br><br>
    {% endfor %}
{% endif %}

{% if summary_table %}
    <h2> Summary Table</h2>
    <table>
        <tr>
            <th>Month</th>
            <th>Product</th>
            <th>Units Sold</th>
            <th>Revenue</th>
            <th>Profit</th>
        </tr>
        {% for row in summary_table %}
        <tr>
            <td>{{ row.Month }}</td>
            <td>{{ row.Product }}</td>
            <td>{{ row.Units_Sold }}</td>
            <td>{{ row.Revenue }}</td>
            <td>{{ row.Profit }}</td>
        </tr>
        {% endfor %}
    </table>
{% endif %}

<hr>
<a href="/upload"> Upload New CSV</a>
<a href="/download"> Download Report</a>
<a href="/logout"> Logout</a>
{% endblock %}
