{% extends "base.html" %}
{% block title %}Dashboard - e-Infosoft{% endblock %}
{% block content %}

<h1>ðŸ“Š e-Infosoft Business Dashboard</h1>

<!-- File Upload -->
<form method="POST" enctype="multipart/form-data">
    <label>Upload CSV File:</label>
    <input type="file" name="file" required>
    <button type="submit" class="button">Upload & Analyze</button>
</form>
<hr>

{% if chart %}
    <h2>ðŸ“ˆ Monthly Revenue Chart</h2>
    <img src="data:image/png;base64,{{ chart }}" width="700">
{% endif %}

{% if kpi %}
    <h2>ðŸ“Œ Key Performance Indicators (KPIs)</h2>
    <ul>
        <li><strong>Total Revenue:</strong> â‚¹{{ kpi['Total Revenue'] }}</li>
        <li><strong>Total Profit:</strong> â‚¹{{ kpi['Total Profit'] }}</li>
        <li><strong>Average Monthly Sales:</strong> â‚¹{{ kpi['Avg Monthly Sales'] }}</li>
        <li><strong>Top Product:</strong> {{ kpi['Top Product'] }}</li>
    </ul>
{% endif %}

{% if segment_data %}
    <h2>ðŸ‘¥ Customer Segmentation</h2>
    <table>
        <tr><th>Customer</th><th>Revenue</th><th>Segment</th></tr>
        {% for row in segment_data.iterrows() %}
        <tr>
            <td>{{ row[1]['Customer'] }}</td>
            <td>{{ row[1]['Revenue'] }}</td>
            <td>{{ row[1]['Segment'] }}</td>
        </tr>
        {% endfor %}
    </table>
{% endif %}

{% if inventory_data %}
    <h2>ðŸ“¦ Inventory Optimization</h2>
    <table>
        <tr><th>Product</th><th>Total Sold</th><th>Status</th></tr>
        {% for row in inventory_data.iterrows() %}
        <tr>
            <td>{{ row[1]['Product'] }}</td>
            <td>{{ row[1]['Quantity Sold'] }}</td>
            <td>{{ row[1]['Status'] }}</td>
        </tr>
        {% endfor %}
    </table>
{% endif %}

{% endblock %}

