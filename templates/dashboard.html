{% extends "base.html" %}
{% block title %}Dashboard - e-Infosoft{% endblock %}
{% block content %}
<h1>Welcome, {{ session['username'] }}!</h1>

<form method="POST" enctype="multipart/form-data">
    <label>Select CSV File:</label><br>
    <input type="file" name="csv_file" accept=".csv" required><br><br>

    <label>Select Chart Type:</label>
    <select name="chart_type">
        <option value="bar">Bar</option>
        <option value="line">Line</option>
        <option value="pie">Pie</option>
    </select><br><br>

    <label>Select Metric:</label>
    <select name="metric">
        <option value="Revenue">Revenue</option>
        <option value="Profit">Profit</option>
    </select><br><br>

    <input type="submit" value="Generate Charts">
</form>

{% if charts %}
    <h2>Charts:</h2>
    {% for chart_type, product, metric, chart_url in charts %}
        <h3>{{ product }} - {{ metric }}</h3>
        <img src="data:image/png;base64,{{ chart_url }}" alt="{{ product }}">
    {% endfor %}
{% endif %}
{% endblock %}
